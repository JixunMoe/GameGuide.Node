extends layout

block content
  - function active_chapter(c) { return c.active ? 'active' : '' };
  header
    h1 #{guide.name}
      br
      small 攻略作者：
        a(href="/user/" + guide.guide_user)
          =guide.guide_user
        span ，游戏：
        a(href='/' + guide.game_url)
          =guide.game_title

  main#guide.guide(data-chapter=chapter.url)
    section.col-xs-12.col-md-3
      h2 章节列表
      ul.list-group.chapters
        each chapter in chapters
          a.chapter.list-group-item(
            class=active_chapter(chapter),
            href='/' + guide.game_url + '/' + guide.url + '/' + chapter.url,
            data-url=chapter.url,
            data-id=chapter.chapter_id
          ) #{chapter.title}

    section#chapter.col-xs-12.col-md-9
      h2.title= chapter.title
      div.content!=marked(chapter.content)

block title
  = guide.name + " - 游戏攻略"

block require
  include ./includes/requirejs
  mixin require("/javascripts/guide.js")